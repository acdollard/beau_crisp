---
// Welcome component that uses session data from Layout
---

<div class="bg-white shadow-lg rounded-sm p-6" id="welcomeContent">
  <div class="text-center">
    <p class="text-gray-600 mb-4">Loading...</p>
  </div>
</div>

<script>
  // Access session data from Layout.astro
  const session = (window as any).sessionData;
  const welcomeContent = document.getElementById("welcomeContent");

  if (session) {
    welcomeContent!.innerHTML = `
      <div>
        <h2 class="text-2xl font-customFont text-ebony mb-4">
          Welcome back, ${session.user.user_metadata?.name || session.user.email}!
        </h2>
        <p class="text-gray-600 mb-4">
          You're logged in and ready to access your personalized content.
        </p>
        <div class="space-y-2">
          <p class="text-sm text-gray-500">
            <strong>Email:</strong> ${session.user.email}
          </p>
          <p class="text-sm text-gray-500">
            <strong>Member since:</strong> ${new Date(session.user.created_at).toLocaleDateString()}
          </p>
        </div>
      </div>
    `;
  } else {
    welcomeContent!.innerHTML = `
      <div>
        <h2 class="text-2xl font-customFont text-ebony mb-4">
          Welcome to Buried In The Bones
        </h2>
        <p class="text-gray-600 mb-4">
          Sign in to access your personalized content and track your progress.
        </p>
        <a 
          href="/login" 
          class="inline-block bg-khaki text-floralWhite px-4 py-2 rounded-sm hover:bg-ebony transition-colors duration-200"
        >
          Sign In
        </a>
      </div>
    `;
  }
</script>
